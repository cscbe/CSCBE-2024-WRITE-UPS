#!/usr/bin/env python

def validate_input(text, key):
    # must not include some keywords
    for keyword in ['exec', 'import', 'open', 'os', 'read', 'system', 'write', 'help', 'dir', 'print', 'fuck', 'you']:
        if keyword in text:
            print(f"Jail policy: Illegal keyword '{keyword}'")
            return False
    # must contain secret key
    if key not in text:
        print("Jail policy: Must contain secret key")
        return False
    # must not contain some chars
    for character in "bdginpstxyz;[].{}_'":
        if character in text:
            print(f"Jail policy: Illegal character '{character}'")
            return False
    return True


def process_flag(location):
    # REDACTED
    return


def main():
    my_secret_key_you_will_never_find_oh_never_mind = "2381236487346532754754875487548732891781711524356321"
    process_flag("flag.txt")
    print("You have been locked up, what will you do?")
    text = input('>>> ')
    if validate_input(text.lower(), my_secret_key_you_will_never_find_oh_never_mind.lower()):
        exec(text)
    else:
        print("No I don't think so...")


if __name__ == "__main__":
    main()
